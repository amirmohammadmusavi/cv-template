{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block breadcrumbs %}{% endblock %}

{% block content %}
<div class="row">
    <!-- <div class="col-12 col-sm-6 col-xl-3 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row align-items-center">
                    <div class="col-6 col-xl-6 text-xl-center d-flex align-items-center justify-content-xl-center">
                        <div class="rounded btn py-4 bg-white">
                            <svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 16C15 14.3431 12.7614 13 10 13C7.23858 13 5 14.3431 5 16M19 13.0004C19 11.7702 17.7659 10.7129 16 10.25M1 13.0004C1 11.7702 2.2341 10.7129 4 10.25M16 6.23611C16.6137 5.68679 17 4.8885 17 4C17 2.34315 15.6569 1 14 1C13.2316 1 12.5308 1.28885 12 1.76389M4 6.23611C3.38625 5.68679 3 4.8885 3 4C3 2.34315 4.34315 1 6 1C6.76835 1 7.46924 1.28885 8 1.76389M10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7C13 8.65685 11.6569 10 10 10Z" stroke="#1E2126" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                
                        </div>
                        <div class="d-sm-none">
                            <h2 class="h5">کاربران</h2>
                            <h3 class="fw-extrabold mb-1">{{user_status.all_user}}</h3>
                        </div>
                    </div>
                    <div class="col-6 col-xl-6">
                        <div class="d-none d-sm-block">
                            <h2 class="h6 text-gray-400 mb-0">کاربران</h2>
                            <h3 class="mb-2">{{user_status.all_user}} نفر</h3>
                        </div>
                        {% comment %} <div class="small d-flex mt-1">
                            <div>نسبت به ماه گذشته
                                <svg class="icon icon-xs text-success" fill="currentColor" viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                                        clip-rule="evenodd"></path>
                                </svg>
                                <span class="text-success fw-bolder">22%</span>
                            </div>
                        </div> {% endcomment %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-3 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row align-items-center">
                    <div class="col-6 col-xl-6 text-xl-center d-flex align-items-center justify-content-xl-center">
                        <div class="rounded btn py-4 bg-white">
                            <svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 16C15 14.3431 12.7614 13 10 13C7.23858 13 5 14.3431 5 16M19 13.0004C19 11.7702 17.7659 10.7129 16 10.25M1 13.0004C1 11.7702 2.2341 10.7129 4 10.25M16 6.23611C16.6137 5.68679 17 4.8885 17 4C17 2.34315 15.6569 1 14 1C13.2316 1 12.5308 1.28885 12 1.76389M4 6.23611C3.38625 5.68679 3 4.8885 3 4C3 2.34315 4.34315 1 6 1C6.76835 1 7.46924 1.28885 8 1.76389M10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7C13 8.65685 11.6569 10 10 10Z" stroke="#1E2126" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                
                        </div>
                        <div class="d-sm-none">
                            <h2 class="h5">رزرو و تعیین وقت شده ها</h2>
                            <h3 class="fw-extrabold mb-1">{{user_status.user_reserved}}</h3>
                        </div>
                    </div>
                    <div class="col-6 col-xl-6">
                        <div class="d-none d-sm-block">
                            <h2 class="h6 text-gray-400 mb-0">رزرو و تعیین وقت شده ها</h2>
                            <h3 class="mb-2">{{user_status.user_reserved}} نفر</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-3 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row align-items-center">
                    <div class="col-6 col-xl-6 text-xl-center d-flex align-items-center justify-content-xl-center">
                        <div class="rounded btn py-4 bg-white">
                            <svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 16C15 14.3431 12.7614 13 10 13C7.23858 13 5 14.3431 5 16M19 13.0004C19 11.7702 17.7659 10.7129 16 10.25M1 13.0004C1 11.7702 2.2341 10.7129 4 10.25M16 6.23611C16.6137 5.68679 17 4.8885 17 4C17 2.34315 15.6569 1 14 1C13.2316 1 12.5308 1.28885 12 1.76389M4 6.23611C3.38625 5.68679 3 4.8885 3 4C3 2.34315 4.34315 1 6 1C6.76835 1 7.46924 1.28885 8 1.76389M10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7C13 8.65685 11.6569 10 10 10Z" stroke="#1E2126" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                
                        </div>
                        <div class="d-sm-none">
                            <h2 class="h5">در حال پیگیری ها</h2>
                            <h3 class="fw-extrabold mb-1">{{user_status.user_check}}</h3>
                        </div>
                    </div>
                    <div class="col-6 col-xl-6">
                        <div class="d-none d-sm-block">
                            <h2 class="h6 text-gray-400 mb-0">در حال پیگیری ها</h2>
                            <h3 class="mb-2">{{user_status.user_check}} نفر</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-3 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row align-items-center">
                    <div class="col-6 col-xl-6 text-xl-center d-flex align-items-center justify-content-xl-center">
                        <div class="rounded btn py-4 bg-white">
                            <svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 16C15 14.3431 12.7614 13 10 13C7.23858 13 5 14.3431 5 16M19 13.0004C19 11.7702 17.7659 10.7129 16 10.25M1 13.0004C1 11.7702 2.2341 10.7129 4 10.25M16 6.23611C16.6137 5.68679 17 4.8885 17 4C17 2.34315 15.6569 1 14 1C13.2316 1 12.5308 1.28885 12 1.76389M4 6.23611C3.38625 5.68679 3 4.8885 3 4C3 2.34315 4.34315 1 6 1C6.76835 1 7.46924 1.28885 8 1.76389M10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7C13 8.65685 11.6569 10 10 10Z" stroke="#1E2126" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                
                        </div>
                        <div class="d-sm-none">
                            <h2 class="h5">بی پاسخ ها</h2>
                            <h3 class="fw-extrabold mb-1">{{user_status.user_noawnser}}</h3>
                        </div>
                    </div>
                    <div class="col-6 col-xl-6">
                        <div class="d-none d-sm-block">
                            <h2 class="h6 text-gray-400 mb-0">بی پاسخ ها</h2>
                            <h3 class="mb-2">{{user_status.user_noawnser}} نفر</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
    <!--پر بازدید ها-->
    {% if dashboard_detail.most_visit %}
    <div class="col-12 col-xl-6 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row">
                    <div class="col-12">
                        <h5>پر بازدید ترین محصولات</h5>
                    </div>
                </div>
                <div class="row mt-2">
                    {% for x in dashboard_detail.most_visit %}
                    <div class="col-6">
                        <div class="d-flex justify-content-between card flex-row rounded p-3" style="border-right: 3px solid #ecc7c0;">
                            <div>
                                <span>{{x.title}}</span>
                                <h5 class="mt-2">تعداد بازدید: {{x.viewCounter}}</h5>
                            </div>
                            <div><img style="width:70px" class="rounded" src="{% if x.cover %}{{x.cover.url}}{% else %}/media/product/default.png{% endif %}"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    {% if dashboard_detail.most_likely %}
    <div class="col-12 col-xl-6 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row">
                    <div class="col-12">
                        <h5>پر بازدید ترین محصولات</h5>
                    </div>
                </div>
                <div class="row mt-2">
                    {% for x in dashboard_detail.most_visit %}
                    <div class="col-6">
                        <div class="d-flex justify-content-between card flex-row rounded p-3" style="border-right: 3px solid #ecc7c0;">
                            <div>
                                <span>{{x.title}}</span>
                                <h5 class="mt-2">تعداد بازدید: {{x.viewCounter}}</h5>
                            </div>
                            <div><img style="width:70px" class="rounded" src="{% if x.cover %}{{x.cover.url}}{% else %}/media/product/default.png{% endif %}"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    {% if dashboard_detail.recent_comment %}
    <div class="col-12 col-xl-6 mb-4">
        <div class="card border-0  h-100">
            <div class="card-body" style="background: linear-gradient(270deg, #687eff21, transparent 50%);">
                <div class="row">
                    <div class="col-12">
                        <h5>جدید ترین نظرات</h5>
                    </div>
                </div>
                <div class="row mt-2">
                    {% for x in dashboard_detail.recent_comment %}
                    <div class="col-12">
                        <div class="d-flex justify-content-start card flex-row rounded p-3" style="border-right: 3px solid #ecc7c0;">
                            <div style="width:30px;height:30px;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:50%;margin-left: 16px;" class="ml-4"><img style="min-width:30px" class="rounded" src="{% if x.From.userprofile.Prof %}{{ x.From.userprofile.Prof.url}}{% else %}/media/profiles/default.png{% endif %}"></div>
                            <div>
                                <h6>{{x.From.get_full_name}}</h6>
                                <h6>در رابطه با {{x.To.title}}</h6>
                                <p class="mt-2">{{x.Text}}</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card border-0 ">
            <div class="card-header">
                <div class="row align-items-center">
                    <div class="col">
                        <h2 class="fs-5 fw-bold mb-0">{% trans 'Recent actions' %}</h2>
                        {% trans 'My actions' %}
                    </div>
                    {% load log %}
                    {% get_admin_log 10 as admin_log for_user user %}
                </div>
            </div>
            <div class="table-responsive">
                <table class="table align-items-center table-flush">
                    <tbody>
                        {% if admin_log %}
                        {% for entry in admin_log %}
                        {% if forloop.counter < 3 %}
                        <tr>
                            <th class="text-gray-900" scope="row">
                                {{ entry.object_repr }}
                                {% if entry.content_type %}
                                <p class="text-muted">
                                    {% filter capfirst %}{{ entry.content_type }}{% endfilter %}</p>
                                {% else %}
                                <p class="text-muted">{% trans 'Unknown content' %}</p>
                                {% endif %}
                            </th>
                            <td class="fw-bolder text-gray-500">
                                <a href="{{ entry.get_admin_url }}" type="button" rel="tooltip" title=""
                                    class="btn btn-link py-2 " data-original-title="{{ entry.object_repr }}">
                                    <svg width="14" height="14" viewBox="0 0 22 14" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M2.58631 8.77881C4.36575 10.5478 7.46904 12.9999 10.9997 12.9999C14.5303 12.9999 17.6331 10.5478 19.4125 8.77881C19.8818 8.31226 20.1172 8.07819 20.2667 7.62012C20.3733 7.29328 20.3733 6.70674 20.2667 6.3799C20.1172 5.92181 19.8818 5.6877 19.4125 5.22111C17.633 3.45208 14.5303 1 10.9997 1C7.46904 1 4.36575 3.45208 2.58631 5.22111C2.11665 5.68802 1.8818 5.92165 1.73231 6.3799C1.62569 6.70673 1.62569 7.29328 1.73231 7.62012C1.8818 8.07837 2.11665 8.31189 2.58631 8.77881Z"
                                            stroke="#687eff" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path
                                            d="M8.99951 7C8.99951 8.10457 9.89494 9 10.9995 9C12.1041 9 12.9995 8.10457 12.9995 7C12.9995 5.89543 12.1041 5 10.9995 5C9.89494 5 8.99951 5.89543 8.99951 7Z"
                                            stroke="#687eff" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    <h6 style="font-size: 12px;display: inline-block;">مشاهده</h6>
                                </a>
                            </td>
                            <td class="fw-bolder text-gray-500">
                                {% if entry.is_addition %}
                                <svg width="20" height="14" viewBox="0 0 20 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 11H8M13 10H16M16 10H19M16 10V13M16 10V7M1 6H12M1 1H12" stroke="#7AFFC7"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>

                                {% endif %}
                                {% if entry.is_change %}
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M1 17.0001H17M1 17.0001V13.0001L11.8686 2.13146L11.8704 2.12976C12.2652 1.73488 12.463 1.53709 12.691 1.46301C12.8919 1.39775 13.1082 1.39775 13.3091 1.46301C13.5369 1.53704 13.7345 1.7346 14.1288 2.12892L15.8686 3.86872C16.2646 4.26474 16.4627 4.46284 16.5369 4.69117C16.6022 4.89201 16.6021 5.10835 16.5369 5.3092C16.4628 5.53736 16.265 5.73516 15.8695 6.13061L15.8686 6.13146L5 17.0001L1 17.0001Z"
                                        stroke="#FFE071" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>

                                {% endif %}
                                {% if entry.is_deletion %}
                                <svg width="18" height="20" viewBox="0 0 18 20" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M3 4V15.8C3 16.9201 3 17.4798 3.21799 17.9076C3.40973 18.2839 3.71547 18.5905 4.0918 18.7822C4.5192 19 5.07899 19 6.19691 19H11.8031C12.921 19 13.48 19 13.9074 18.7822C14.2837 18.5905 14.5905 18.2839 14.7822 17.9076C15 17.4802 15 16.921 15 15.8031V4M3 4H5M3 4H1M5 4H13M5 4C5 3.06812 5 2.60241 5.15224 2.23486C5.35523 1.74481 5.74432 1.35523 6.23438 1.15224C6.60192 1 7.06812 1 8 1H10C10.9319 1 11.3978 1 11.7654 1.15224C12.2554 1.35523 12.6447 1.74481 12.8477 2.23486C12.9999 2.6024 13 3.06812 13 4M13 4H15M15 4H17"
                                        stroke="#FF5757" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>

                                {% endif %}
                            </td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                        {% else %}
                        <p>{% trans 'None available' %}</p>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block extrascript %}{% endblock %}